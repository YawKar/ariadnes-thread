# Практика 3

Цель: Описать свою ОС

## Общие характеристики

- Архитектура: aarch64 (`uname -pim`)
- Версия релиза ядра: 6.11.0-14-generic (`uname -r`)
- Версия сборки ядра: #15-Ubuntu SMP PREEMPT_DYNAMIC Fri Jan 10 23:05:39 UTC 2025 (`uname -v`)
- Всего памяти (swap + mem): 11Gi (`free -ht`)
- Используемой памяти (swap + mem): 1.1Gi (`free -ht`)
- Свободной памяти (swap + mem): 9.4Gi (`free -ht`)

## Предустановленные пакеты

- Всего пакетов: 1604 (`echo $(($(apt list --installed | wc -l) - 1))`) (-1, потому что в начале строка Listing...)
- Список сдампил: [02-practice-apt-list-installed.txt](./02-practice-apt-list-installed.txt)

## Порядок загрузки системы

1. Нажимаем на кнопку "Power on", что включает на материнке BIOS/UEFI реализацию.
2. BIOS или UEFI начинают исполнение.
    - BIOS означает "Basic Input Output System" спецификацию прошивки (Базовая Система Ввода Вывода)
      - она старая (появилась в 1981)
      - она не особо безопасная (может загружать драйвера или бут лоадеры, не подписанные цифровой подписью)
      - использует MBR (Master Boot Record), который тоже старый и не гибкий (например, у него есть ограничение на максимальный размер жесткого диска в 2.2TB)
    - UEFI означает "Unified Extensible Firmware Interface" спецификацию прошивки (Унифицированный расширяемый интерфейс прошивки)
      - он новый (появился в 2006)
      - он более безопасный ("Secure Boot" проверяет цифровую подпись UEFI-драйверов OS boot loader'ов)
      - он исползует GPT (GUID Partition Table), которая новая и более гибкая (например, у нее ограничение на размер жесткого диска 9400000000 TB)
3. BIOS/UEFI запускает POST, который означает "Power-On Self-Test" (Самотестирование при включении)
    - он устанавливает в начальное состояние железные компоненты системы
    - проверяет, что все железки работают как надо (готовы для бута ОС)
    - результаты проверки либо отображаются на дисплее, либо сохраняются для дальнейшего получения инструментом диагностики, либо передаются последовательностью звуковых/световых сигналов
    - чем занимается BIOS во время запуска POST:
      - проверяет состояние CPU регистров
      - проверяет целостность кода BIOS
      - проверяет базовые компоненты вроде системного таймера и обработчика прерываний
      - проверяет основное хранилище (то, к которому непосредственно обращается CPU)
      - исследует, инициализирует и каталогизирует все системные шины и устройства
      - отбирает устройства, доступные для boot'а (в более старых системах POST не организовывал и не отбирал bootable devices, он только идентифицировал флоппи и жесткие диски, а BIOS уже по очереди дальше пыталась загрузиться в них)
4. Согласно порядку загрузочных устройств BIOS/UEFI запустит boot loader/boot manager как например GRUB(2) или LILO (устаревший)
    - MBR или GPT будут указывать на GRUB/LILO
5. GRUB2/LILO загружают в память linux kernel starter и передают ему контроль
6. Linux kernel starter забирает себе ресурсы компьютера и инициализирует фоновые сервисы
    - Во-первых, он декомпрессует ядро в память, проверяет железо, загружает драйверы устройств и модули ядра
    - Во-вторых, запускает процесс "init"-системы, например, systemd (который будет являться родительским для всех процессов)
      - systemd проверяет и дозапускает оставшиеся драйвера хардвейра
      - systemd примаунтит файловые системы и диски, сделав их доступными
      - systemd запустит сетевые сервисы, звуковые сервисы, сервисы управления питанием
      - systemd будет обрабатывать логины пользователей
      - systemd загрузит рабочее окружение

